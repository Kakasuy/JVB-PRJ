import avatars1 from '@/images/avatars/Image-1.png'
import avatars2 from '@/images/avatars/Image-2.png'
import avatars3 from '@/images/avatars/Image-3.png'
import avatars4 from '@/images/avatars/Image-4.png'
import avatars5 from '@/images/avatars/Image-5.png'
import avatars6 from '@/images/avatars/Image-6.png'
import avatars7 from '@/images/avatars/Image-7.png'
import avatars8 from '@/images/avatars/Image-8.png'

export async function getAuthors() {
  return [
    {
      id: 1,
      displayName: 'Truelock Alric',
      handle: 'truelock-alric',
      email: 'atruelock0@skype.com',
      gender: 'Bigender',
      avatarUrl: avatars1.src,
      bgImage: 'https://images.pexels.com/photos/4064835/pexels-photo-4064835.jpeg?auto=compress&cs=tinysrgb&w=500',
      count: 40,
      description:
        'There’s no stopping the tech giant. Apple now opens its 100th store in China.There’s no stopping the tech giant.',
      jobName: 'Manager',
      starRating: 4.9,
    },
    {
      id: 2,
      displayName: 'Birrell Chariot',
      handle: 'birrell-chariot',
      email: 'cbirrell1@google.com.hk',
      gender: 'Genderfluid',
      avatarUrl: avatars2.src,
      count: 113,
      description:
        'There’s no stopping the tech giant. Apple now opens its 100th store in China.There’s no stopping the tech giant.',
      jobName: 'Developer',
      bgImage:
        'https://images.pexels.com/photos/5799379/pexels-photo-5799379.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',
      starRating: 4.8,
    },
    {
      id: 3,
      displayName: 'Foulcher Nathanil',
      handle: 'foulcher-nathanil',
      email: 'nfoulcher2@google.com.br',
      gender: 'Bigender',
      avatarUrl: avatars3.src,
      count: 43,
      description:
        'There’s no stopping the tech giant. Apple now opens its 100th store in China.There’s no stopping the tech giant.',
      jobName: 'Writer',
      bgImage:
        'https://images.pexels.com/photos/1001990/pexels-photo-1001990.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',
      starRating: 4.7,
    },
    {
      id: 4,
      displayName: 'Falconar Agnes',
      handle: 'falconar-agnes',
      email: 'afalconar3@google.ru',
      gender: 'Non-binary',
      avatarUrl: avatars4.src,
      count: 36,
      description:
        'There’s no stopping the tech giant. Apple now opens its 100th store in China.There’s no stopping the tech giant.',
      jobName: 'Editor',
      bgImage:
        'https://images.pexels.com/photos/2394446/pexels-photo-2394446.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',
      starRating: 4.6,
    },
    {
      id: 5,
      displayName: 'Tousy Vita',
      handle: 'tousy-vita',
      email: 'vtousy4@elpais.com',
      gender: 'Male',
      avatarUrl: avatars5.src,
      count: 38,
      description:
        'There’s no stopping the tech giant. Apple now opens its 100th store in China.There’s no stopping the tech giant.',
      jobName: 'Designer',
      bgImage:
        'https://images.pexels.com/photos/3082150/pexels-photo-3082150.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',
      starRating: 4.5,
    },
    {
      id: 6,
      displayName: 'Friar Donna',
      handle: 'friar-donna',
      email: 'dfriar5@telegraph.co.uk',
      gender: 'Agender',
      avatarUrl: avatars6.src,
      count: 31,
      description:
        'There’s no stopping the tech giant. Apple now opens its 100th store in China.There’s no stopping the tech giant.',
      jobName: 'Designer',
      bgImage:
        'https://images.pexels.com/photos/5333590/pexels-photo-5333590.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',
      starRating: 4.4,
    },
    {
      id: 7,
      displayName: 'Royal Sergei',
      handle: 'royal-sergei',
      email: 'sroyal6@netlog.com',
      gender: 'Non-binary',
      avatarUrl: avatars7.src,
      count: 102,
      description:
        'There’s no stopping the tech giant. Apple now opens its 100th store in China.There’s no stopping the tech giant.',
      jobName: 'CTO',
      bgImage:
        'https://images.pexels.com/photos/4492596/pexels-photo-4492596.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',
      starRating: 4.3,
    },
    {
      id: 8,
      displayName: 'Sleite Claudetta',
      handle: 'sleite-claudetta',
      email: 'csleite7@godaddy.com',
      gender: 'Genderqueer',
      avatarUrl: avatars8.src,
      count: 35,
      description:
        'There’s no stopping the tech giant. Apple now opens its 100th store in China.There’s no stopping the tech giant.',
      jobName: 'Manager',
      bgImage:
        'https://images.pexels.com/photos/5083491/pexels-photo-5083491.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',
      starRating: 4.2,
    },
    {
      id: 9,
      displayName: 'Pillifant Vern',
      handle: 'pillifant-vern',
      email: 'vpillifant8@bravesites.com',
      gender: 'Male',
      avatarUrl: avatars1.src,
      count: 21,
      description:
        'There’s no stopping the tech giant. Apple now opens its 100th store in China.There’s no stopping the tech giant.',
      jobName: 'Manager',
      bgImage:
        'https://images.pexels.com/photos/3965509/pexels-photo-3965509.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',
      starRating: 4.2,
    },
    {
      id: 10,
      displayName: 'Fones Mimi',
      handle: 'fones-mimi',
      email: 'mfones9@canalblog.com',
      gender: 'Agender',
      avatarUrl: avatars2.src,
      count: 142,
      description:
        'There’s no stopping the tech giant. Apple now opens its 100th store in China.There’s no stopping the tech giant.',
      jobName: 'Designer',
      bgImage:
        'https://images.pexels.com/photos/5966631/pexels-photo-5966631.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500',
      starRating: 4.2,
    },
  ]
}

export async function getAuthorByHandle(handle: string) {
  // Kiểm tra xem có phải current user không bằng cách check với các handle đặc biệt
  // hoặc nếu handle match với user hiện tại trong Firebase
  if (handle === 'my-profile' || handle === 'current-user') {
    // Import UserService để lấy thông tin user thật
    const { UserService } = await import('@/services/UserService')
    const { auth } = await import('@/lib/firebase')
    
    try {
      const currentUser = auth.currentUser
      if (currentUser) {
        const userProfile = await UserService.getUserProfile(currentUser.uid)
        if (userProfile) {
          return {
            id: userProfile.uid,
            displayName: userProfile.displayName || 'User',
            handle: userProfile.handle || 'current-user',
            avatarUrl: userProfile.photoURL || '/placeholder-avatar.jpg',
            starRating: 4.8, // Có thể tính từ reviews thật
            count: 0, // Số listings của user
            jobName: 'Host',
            bgImage: '/placeholder-bg.jpg',
            description: userProfile.bio || 'Providing lake views, The Symphony 9 Tam Coc in Ninh Binh provides accommodation, an outdoor.',
            address: userProfile.address || 'Ha Noi, Viet Nam',
            phone: userProfile.phone || '+84 123 456 789',
            languages: userProfile.languages?.join(', ') || 'English, Vietnamese',
            joinedDate: userProfile.createdAt ? 
              new Date(userProfile.createdAt.seconds * 1000).toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long' 
              }) : 'March 2016',
            reviewsCount: 0, // Reviews của user này
          }
        }
      }
    } catch (error) {
      console.error('Error fetching current user profile for author page:', error)
    }
  }

  // Nếu không phải current user hoặc có lỗi, fallback về mock data
  const authors = await getAuthors()
  let author = authors.find((author) => author.handle === handle)
  if (!author?.id) {
    // return null

    // If no author found, return the first one
    // for demo purposes
    author = authors[0]
  }

  return {
    ...author,
    description: 'Providing lake views, The Symphony 9 Tam Coc in Ninh Binh provides accommodation, an outdoor.',
    address: 'Ha Noi, Viet Nam',
    phone: '+84 123 456 789',
    languages: 'English, Vietnamese',
    joinedDate: 'March 2016',
    reviewsCount: 120,
  }
}

export type TAuthor = Awaited<ReturnType<typeof getAuthors>>[number]
